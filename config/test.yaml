
substitutions:
  devicename: test
  upper_devicename: Test

esphome:
  name: ${devicename}
  platform: ESP32
  board: nodemcu-32s


wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_password

captive_portal:

mqtt:
  broker: !secret broker_ip
  discovery: false
  keepalive: 600s
  on_message:
    topic: ${devicename}/ota_mode
    payload: 'ON'
    then:
      - deep_sleep.prevent: deep_sleep_1

logger:
  level: INFO

api:

ota:

sensor:
  - platform: ultrasonic
    trigger_pin: GPIO25
    echo_pin: GPIO26
    name: "Ultrasonic Sensor"
    update_interval: 1s

deep_sleep:
  id: deep_sleep_1
  run_duration: 20s
  sleep_duration: 1min

