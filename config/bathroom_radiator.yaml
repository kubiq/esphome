
substitutions:
  devicename: bathroom_radiator
  upper_devicename: Bathroom Radiator
  update_interval: 600s

esphome:
  name: $devicename
  platform: ESP8266
  board: esp01_1m

packages:
  wifi: !include common/wifi.yaml
  mqtt: !include common/mqtt.yaml
  logger: !include common/logger.yaml
  #api: !include common/api.yaml
  ota: !include common/ota.yaml
  web_server: !include common/web_server.yaml

captive_portal:

sensor:
  - <<: !include common/sensor/uptime.config.yaml
  - <<: !include common/sensor/wifi_signal.config.yaml

binary_sensor:
  - platform: gpio
    pin:
      number: GPIO0
      mode: INPUT_PULLUP
      inverted: True
    name: ${upper_devicename} Button
    on_press:
      then:
        - switch.toggle: relay

  - platform: status
    name: ${upper_devicename} Status

switch:
  - platform: gpio
    name: ${upper_devicename} Relay
    pin: GPIO12
    id: relay

output:
# Register the green LED as a dimmable output ....
   - platform: esp8266_pwm
     id: s20_green_led
     pin:
       number: GPIO13
       inverted: True

light:
# ... and then make a light out of it.
   - platform: monochromatic
     name: ${upper_devicename} Green LED
     output: s20_green_led
